{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Thecode2/Desktop/lUMYNIS2/multi-platform-site/lib/api.ts"],"sourcesContent":["const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:4000'\r\n\r\nexport async function apiCall(endpoint: string, options: RequestInit = {}) {\r\n  const url = `${API_URL}${endpoint}`\r\n  const headers = new Headers({\r\n    'Content-Type': 'application/json',\r\n  })\r\n\r\n  // Merge existing headers\r\n  if (options.headers) {\r\n    const existingHeaders = new Headers(options.headers)\r\n    existingHeaders.forEach((value, key) => {\r\n      headers.set(key, value)\r\n    })\r\n  }\r\n\r\n  // Add token if available\r\n  if (typeof window !== 'undefined') {\r\n    const token = localStorage.getItem('token')\r\n    if (token) {\r\n      headers.set('Authorization', `Bearer ${token}`)\r\n    }\r\n  }\r\n\r\n  try {\r\n    const response = await fetch(url, {\r\n      ...options,\r\n      headers,\r\n    })\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json().catch(() => ({ error: 'Unknown error' }))\r\n      const customError = new Error(error.error || 'API request failed')\r\n      Object.assign(customError, {\r\n        status: response.status,\r\n        statusText: response.statusText,\r\n        response: error\r\n      })\r\n      throw customError\r\n    }\r\n\r\n    return response.json()\r\n  } catch (error) {\r\n    if (error instanceof Error) {\r\n      throw error\r\n    }\r\n    const customError = new Error('Network or unknown error')\r\n    Object.assign(customError, { originalError: error })\r\n    throw customError\r\n  }\r\n}\r\n\r\n// Auth API\r\nexport const authApi = {\r\n  signup: (data: any) => apiCall('/api/v1/auth/signup', { method: 'POST', body: JSON.stringify(data) }),\r\n  login: (data: any) => apiCall('/api/v1/auth/login', { method: 'POST', body: JSON.stringify(data) }),\r\n  me: () => apiCall('/api/v1/auth/me'),\r\n  logout: () => apiCall('/api/v1/auth/logout', { method: 'POST' }),\r\n}\r\n\r\n// Blog API\r\nexport const blogApi = {\r\n  getPosts: (query = '') => apiCall(`/api/v1/blog${query ? `?q=${query}` : ''}`),\r\n  getPost: (slug: string) => apiCall(`/api/v1/blog/${slug}`),\r\n}\r\n\r\n// Market API\r\nexport const marketApi = {\r\n  getProducts: (params: Record<string, any> = {}) => {\r\n    const query = new URLSearchParams(params).toString()\r\n    return apiCall(`/api/v1/market${query ? `?${query}` : ''}`)\r\n  },\r\n  getProduct: (id: string) => apiCall(`/api/v1/market/${id}`),\r\n}\r\n\r\n// Requests API\r\nexport const requestsApi = {\r\n  getRequests: () => apiCall('/api/v1/requests'),\r\n  createRequest: (data: any) => apiCall('/api/v1/requests', { method: 'POST', body: JSON.stringify(data) }),\r\n  closeRequest: (id: number) => apiCall(`/api/v1/requests/${id}/close`, { method: 'PATCH' }),\r\n}\r\n\r\n// User API\r\nexport const userApi = {\r\n  updateProfile: (data: any) => apiCall('/api/v1/user/profile', { method: 'PUT', body: JSON.stringify(data) }),\r\n  updatePassword: (data: any) => apiCall('/api/v1/user/password', { method: 'PUT', body: JSON.stringify(data) }),\r\n  updateAvatar: (avatar: string) => apiCall('/api/v1/user/avatar', { method: 'PUT', body: JSON.stringify({ avatar }) }),\r\n  deleteAccount: () => apiCall('/api/v1/user/account', { method: 'DELETE' }),\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,MAAM,UAAU,6DAAmC;AAE5C,eAAe,QAAQ,QAAgB,EAAE,UAAuB,CAAC,CAAC;IACvE,MAAM,MAAM,GAAG,UAAU,UAAU;IACnC,MAAM,UAAU,IAAI,QAAQ;QAC1B,gBAAgB;IAClB;IAEA,yBAAyB;IACzB,IAAI,QAAQ,OAAO,EAAE;QACnB,MAAM,kBAAkB,IAAI,QAAQ,QAAQ,OAAO;QACnD,gBAAgB,OAAO,CAAC,CAAC,OAAO;YAC9B,QAAQ,GAAG,CAAC,KAAK;QACnB;IACF;IAEA,yBAAyB;IACzB;;IAOA,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,KAAK;YAChC,GAAG,OAAO;YACV;QACF;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC;oBAAE,OAAO;gBAAgB,CAAC;YAC3E,MAAM,cAAc,IAAI,MAAM,MAAM,KAAK,IAAI;YAC7C,OAAO,MAAM,CAAC,aAAa;gBACzB,QAAQ,SAAS,MAAM;gBACvB,YAAY,SAAS,UAAU;gBAC/B,UAAU;YACZ;YACA,MAAM;QACR;QAEA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,IAAI,iBAAiB,OAAO;YAC1B,MAAM;QACR;QACA,MAAM,cAAc,IAAI,MAAM;QAC9B,OAAO,MAAM,CAAC,aAAa;YAAE,eAAe;QAAM;QAClD,MAAM;IACR;AACF;AAGO,MAAM,UAAU;IACrB,QAAQ,CAAC,OAAc,QAAQ,uBAAuB;YAAE,QAAQ;YAAQ,MAAM,KAAK,SAAS,CAAC;QAAM;IACnG,OAAO,CAAC,OAAc,QAAQ,sBAAsB;YAAE,QAAQ;YAAQ,MAAM,KAAK,SAAS,CAAC;QAAM;IACjG,IAAI,IAAM,QAAQ;IAClB,QAAQ,IAAM,QAAQ,uBAAuB;YAAE,QAAQ;QAAO;AAChE;AAGO,MAAM,UAAU;IACrB,UAAU,CAAC,QAAQ,EAAE,GAAK,QAAQ,CAAC,YAAY,EAAE,QAAQ,CAAC,GAAG,EAAE,OAAO,GAAG,IAAI;IAC7E,SAAS,CAAC,OAAiB,QAAQ,CAAC,aAAa,EAAE,MAAM;AAC3D;AAGO,MAAM,YAAY;IACvB,aAAa,CAAC,SAA8B,CAAC,CAAC;QAC5C,MAAM,QAAQ,IAAI,gBAAgB,QAAQ,QAAQ;QAClD,OAAO,QAAQ,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC,EAAE,OAAO,GAAG,IAAI;IAC5D;IACA,YAAY,CAAC,KAAe,QAAQ,CAAC,eAAe,EAAE,IAAI;AAC5D;AAGO,MAAM,cAAc;IACzB,aAAa,IAAM,QAAQ;IAC3B,eAAe,CAAC,OAAc,QAAQ,oBAAoB;YAAE,QAAQ;YAAQ,MAAM,KAAK,SAAS,CAAC;QAAM;IACvG,cAAc,CAAC,KAAe,QAAQ,CAAC,iBAAiB,EAAE,GAAG,MAAM,CAAC,EAAE;YAAE,QAAQ;QAAQ;AAC1F;AAGO,MAAM,UAAU;IACrB,eAAe,CAAC,OAAc,QAAQ,wBAAwB;YAAE,QAAQ;YAAO,MAAM,KAAK,SAAS,CAAC;QAAM;IAC1G,gBAAgB,CAAC,OAAc,QAAQ,yBAAyB;YAAE,QAAQ;YAAO,MAAM,KAAK,SAAS,CAAC;QAAM;IAC5G,cAAc,CAAC,SAAmB,QAAQ,uBAAuB;YAAE,QAAQ;YAAO,MAAM,KAAK,SAAS,CAAC;gBAAE;YAAO;QAAG;IACnH,eAAe,IAAM,QAAQ,wBAAwB;YAAE,QAAQ;QAAS;AAC1E"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Thecode2/Desktop/lUMYNIS2/multi-platform-site/lib/auth-context.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { createContext, useContext, useState, useEffect } from 'react'\r\nimport { authApi } from '@/lib/api'\r\n\r\ninterface User {\r\n  id: number\r\n  email: string\r\n  name: string\r\n  role: string\r\n  avatar?: string\r\n  createdAt: string\r\n  vendorStatus?: 'pending' | 'approved' | 'rejected' | 'blocked' | null\r\n  hasAccessedAccountSpace?: boolean\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null\r\n  token: string | null\r\n  loading: boolean\r\n  signup: (data: any) => Promise<void>\r\n  login: (data: any) => Promise<void>\r\n  logout: () => void\r\n  isAuthenticated: boolean\r\n  updateUser: (userData: Partial<User>) => void\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [token, setToken] = useState<string | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  // Load token from localStorage and fetch user on mount\r\n  useEffect(() => {\r\n    const initAuth = async () => {\r\n      try {\r\n        const savedToken = localStorage.getItem('token')\r\n        console.log('Auth init - Checking for saved token:', !!savedToken)\r\n        \r\n        if (savedToken) {\r\n          setToken(savedToken)\r\n          // Fetch user info using the saved token\r\n          try {\r\n            console.log('Attempting to fetch user data with token:', savedToken.substring(0, 20) + '...')\r\n            const userData = await authApi.me()\r\n            console.log('✓ User data fetched successfully:', userData)\r\n            setUser(userData)\r\n          } catch (error) {\r\n            console.error('✗ Failed to fetch user info:', {\r\n              message: error instanceof Error ? error.message : String(error),\r\n              status: (error as any)?.status,\r\n              statusText: (error as any)?.statusText,\r\n              response: (error as any)?.response\r\n            })\r\n            // Clear token if it's invalid\r\n            console.log('Clearing invalid token from localStorage')\r\n            localStorage.removeItem('token')\r\n            setToken(null)\r\n            setUser(null)\r\n          }\r\n        } else {\r\n          console.log('No saved token found - user is not authenticated')\r\n        }\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    \r\n    initAuth()\r\n  }, [])\r\n\r\n  const signup = async (data: any) => {\r\n    setLoading(true)\r\n    try {\r\n      const response = await authApi.signup(data)\r\n      localStorage.setItem('token', response.token)\r\n      setToken(response.token)\r\n      setUser(response.user)\r\n    } catch (error) {\r\n      console.error('Signup error:', error)\r\n      throw error\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const login = async (data: any) => {\r\n    setLoading(true)\r\n    try {\r\n      const response = await authApi.login(data)\r\n      localStorage.setItem('token', response.token)\r\n      setToken(response.token)\r\n      setUser(response.user)\r\n    } catch (error) {\r\n      console.error('Login error:', error)\r\n      throw error\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('token')\r\n    setToken(null)\r\n    setUser(null)\r\n  }\r\n\r\n  const updateUser = (userData: Partial<User>) => {\r\n    if (user) {\r\n      setUser({ ...user, ...userData })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, token, loading, signup, login, logout, isAuthenticated: !!token, updateUser }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext)\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider')\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AA2BA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,uDAAuD;IACvD,IAAA,kNAAS,EAAC;QACR,MAAM,WAAW;YACf,IAAI;gBACF,MAAM,aAAa,aAAa,OAAO,CAAC;gBACxC,QAAQ,GAAG,CAAC,yCAAyC,CAAC,CAAC;gBAEvD,IAAI,YAAY;oBACd,SAAS;oBACT,wCAAwC;oBACxC,IAAI;wBACF,QAAQ,GAAG,CAAC,6CAA6C,WAAW,SAAS,CAAC,GAAG,MAAM;wBACvF,MAAM,WAAW,MAAM,qHAAO,CAAC,EAAE;wBACjC,QAAQ,GAAG,CAAC,qCAAqC;wBACjD,QAAQ;oBACV,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,gCAAgC;4BAC5C,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO;4BACzD,QAAS,OAAe;4BACxB,YAAa,OAAe;4BAC5B,UAAW,OAAe;wBAC5B;wBACA,8BAA8B;wBAC9B,QAAQ,GAAG,CAAC;wBACZ,aAAa,UAAU,CAAC;wBACxB,SAAS;wBACT,QAAQ;oBACV;gBACF,OAAO;oBACL,QAAQ,GAAG,CAAC;gBACd;YACF,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,SAAS,OAAO;QACpB,WAAW;QACX,IAAI;YACF,MAAM,WAAW,MAAM,qHAAO,CAAC,MAAM,CAAC;YACtC,aAAa,OAAO,CAAC,SAAS,SAAS,KAAK;YAC5C,SAAS,SAAS,KAAK;YACvB,QAAQ,SAAS,IAAI;QACvB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,QAAQ,OAAO;QACnB,WAAW;QACX,IAAI;YACF,MAAM,WAAW,MAAM,qHAAO,CAAC,KAAK,CAAC;YACrC,aAAa,OAAO,CAAC,SAAS,SAAS,KAAK;YAC5C,SAAS,SAAS,KAAK;YACvB,QAAQ,SAAS,IAAI;QACvB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,SAAS;QACT,QAAQ;IACV;IAEA,MAAM,aAAa,CAAC;QAClB,IAAI,MAAM;YACR,QAAQ;gBAAE,GAAG,IAAI;gBAAE,GAAG,QAAQ;YAAC;QACjC;IACF;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;YAAS;YAAQ;YAAO;YAAQ,iBAAiB,CAAC,CAAC;YAAO;QAAW;kBAC9G;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 269, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Thecode2/Desktop/lUMYNIS2/multi-platform-site/components/theme-provider.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport {\n  ThemeProvider as NextThemesProvider,\n  type ThemeProviderProps,\n} from 'next-themes'\n\nexport function ThemeProvider({ children, ...props }: ThemeProviderProps) {\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>\n}\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAQO,SAAS,cAAc,EAAE,QAAQ,EAAE,GAAG,OAA2B;IACtE,qBAAO,8OAAC,iKAAkB;QAAE,GAAG,KAAK;kBAAG;;;;;;AACzC"}}]
}