(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27425,e=>{"use strict";let r=(0,e.i(52568).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>r],27425)},70928,e=>{"use strict";let r=(0,e.i(52568).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>r],70928)},14909,e=>{"use strict";let r=(0,e.i(52568).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>r],14909)},93158,e=>{"use strict";let r=(0,e.i(52568).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>r],93158)},34263,e=>{"use strict";let r=(0,e.i(52568).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>r],34263)},20389,e=>{"use strict";let r=(0,e.i(52568).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["ImageIcon",()=>r],20389)},84989,e=>{"use strict";var r=e.i(63638),t=e.i(90634),a=e.i(50406),s=e.i(98420),o=e.i(34263),i=e.i(9251),l=e.i(93158),n=e.i(70928),d=e.i(27425),c=e.i(20389),u=e.i(14909),m=e.i(79214);let p=[{value:"template",label:"Template"},{value:"design",label:"Design"},{value:"service",label:"Service"},{value:"digital",label:"Produit Digital"},{value:"other",label:"Autre"}];function x(){let e=(0,a.useRouter)(),[x,g]=(0,t.useState)(!1),[b,h]=(0,t.useState)(""),[f,y]=(0,t.useState)(!1),[j,v]=(0,t.useState)({title:"",description:"",price:"",comparePrice:"",stock:"",category:"template",subcategory:"",status:"published",metaTitle:"",metaDescription:""}),[N,k]=(0,t.useState)([]),[w,C]=(0,t.useState)([]),P=e=>{let{name:r,value:t}=e.target;v(e=>({...e,[r]:t})),h("")},S=async r=>{r.preventDefault(),h(""),g(!0);try{let r=localStorage.getItem("token");if(!r){h("Vous devez être connecté"),g(!1);return}if(!j.title||!j.price||!j.category||!j.description){h("Veuillez remplir tous les champs obligatoires (titre, description, prix, catégorie)"),g(!1);return}let t=new FormData;t.append("title",j.title),t.append("description",j.description),t.append("price",j.price),j.comparePrice&&t.append("comparePrice",j.comparePrice),t.append("stock",j.stock||"0"),t.append("category",j.category),j.subcategory&&t.append("subcategory",j.subcategory),t.append("status",j.status),j.metaTitle&&t.append("metaTitle",j.metaTitle),j.metaDescription&&t.append("metaDescription",j.metaDescription),N.forEach(e=>{t.append("images",e)});let a=await fetch("http://localhost:4000/api/v1/vendor/products",{method:"POST",headers:{Authorization:`Bearer ${r}`},body:t}),s=await a.json();if(!a.ok)throw Error(s.error||"Erreur lors de la création du produit");let o=s.id,i=`${window.location.origin}/market/product/${o}`,l=w[0]||"";try{await fetch("http://localhost:4000/api/v1/social/share-article",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({articleId:o,title:j.title,description:j.description,imageUrl:l,articleUrl:i})})}catch(e){console.warn("Social media share failed:",e)}y(!0),setTimeout(()=>{e.push("/market/publication-space/dashboard/products")},1500)}catch(e){h(e.message||"Erreur lors de la création du produit")}finally{g(!1)}};return f?(0,r.jsxs)("div",{className:"max-w-2xl mx-auto text-center py-20",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(n.CheckCircle2,{className:"w-10 h-10 text-green-500"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Produit créé!"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Votre produit a été ajouté à votre boutique."})]}):(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)(m.default,{href:"/market/publication-space/dashboard/products",className:"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground mb-4",children:[(0,r.jsx)(u.ArrowLeft,{size:20}),"Retour aux produits"]}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Ajouter un produit"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-1",children:"Remplissez les informations ci-dessous pour créer un nouveau produit"})]}),(0,r.jsxs)("form",{onSubmit:S,className:"space-y-8",children:[b&&(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/20 flex items-center gap-3",children:[(0,r.jsx)(d.AlertCircle,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,r.jsx)("p",{className:"text-red-500",children:b})]}),(0,r.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[(0,r.jsx)(c.ImageIcon,{className:"w-5 h-5 text-primary"}),"Images du produit"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[w.map((e,t)=>(0,r.jsxs)("div",{className:"relative aspect-square rounded-lg overflow-hidden bg-muted",children:[(0,r.jsx)(s.default,{src:e,alt:`Image ${t+1}`,fill:!0,className:"object-cover"}),(0,r.jsx)("button",{type:"button",onClick:()=>{k(N.filter((e,r)=>r!==t)),C(w.filter((e,r)=>r!==t))},className:"absolute top-2 right-2 p-1 bg-red-500 rounded-full text-white hover:bg-red-600 transition",children:(0,r.jsx)(i.X,{size:14})}),0===t&&(0,r.jsx)("span",{className:"absolute bottom-2 left-2 px-2 py-1 bg-primary text-xs text-white rounded",children:"Principal"})]},t)),N.length<10&&(0,r.jsxs)("label",{className:"aspect-square rounded-lg border-2 border-dashed border-border hover:border-primary cursor-pointer flex flex-col items-center justify-center gap-2 text-muted-foreground hover:text-primary transition",children:[(0,r.jsx)(o.Upload,{size:24}),(0,r.jsx)("span",{className:"text-xs text-center",children:"Ajouter"}),(0,r.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let r=Array.from(e.target.files||[]);r.length+N.length>10?h("Maximum 10 images autorisées"):(k([...N,...r]),r.forEach(e=>{let r=new FileReader;r.onloadend=()=>{C(e=>[...e,r.result])},r.readAsDataURL(e)}))},className:"hidden"})]})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-3",children:"Formats acceptés: JPG, PNG, WEBP. Max 10 images, 10MB par image. La première image sera l'image principale."})]}),(0,r.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Informations de base"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Titre du produit *"}),(0,r.jsx)("input",{type:"text",name:"title",value:j.title,onChange:P,placeholder:"Ex: Template Dashboard React",className:"w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description *"}),(0,r.jsx)("textarea",{name:"description",value:j.description,onChange:P,placeholder:"Décrivez votre produit en détail...",rows:5,className:"w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition resize-none",required:!0})]}),(0,r.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Catégorie *"}),(0,r.jsx)("select",{name:"category",value:j.category,onChange:P,className:"w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground focus:border-primary outline-none",required:!0,children:p.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Sous-catégorie"}),(0,r.jsx)("input",{type:"text",name:"subcategory",value:j.subcategory,onChange:P,placeholder:"Ex: E-commerce, Portfolio...",className:"w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition"})]})]})]})]}),(0,r.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Prix et stock"}),(0,r.jsxs)("div",{className:"grid sm:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Prix (€) *"}),(0,r.jsx)("input",{type:"number",name:"price",value:j.price,onChange:P,placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Prix barré (€)"}),(0,r.jsx)("input",{type:"number",name:"comparePrice",value:j.comparePrice,onChange:P,placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Ancien prix pour montrer une réduction"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Stock disponible"}),(0,r.jsx)("input",{type:"number",name:"stock",value:j.stock,onChange:P,placeholder:"0",min:"0",className:"w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Laissez 0 pour illimité"})]})]})]}),(0,r.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Publication et SEO"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Statut de publication"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"status",value:"draft",checked:"draft"===j.status,onChange:P,className:"w-4 h-4 text-primary"}),(0,r.jsx)("span",{children:"Brouillon"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"status",value:"published",checked:"published"===j.status,onChange:P,className:"w-4 h-4 text-primary"}),(0,r.jsx)("span",{children:"Publier maintenant"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Titre SEO (optionnel)"}),(0,r.jsx)("input",{type:"text",name:"metaTitle",value:j.metaTitle,onChange:P,placeholder:"Titre pour les moteurs de recherche",className:"w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description SEO (optionnel)"}),(0,r.jsx)("textarea",{name:"metaDescription",value:j.metaDescription,onChange:P,placeholder:"Description courte pour les moteurs de recherche (max 160 caractères)",rows:2,maxLength:160,className:"w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition resize-none"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[j.metaDescription.length,"/160 caractères"]})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("button",{type:"submit",disabled:x,className:"flex-1 inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-primary to-accent text-white rounded-lg hover:opacity-90 transition font-medium disabled:opacity-50",children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Loader2,{size:20,className:"animate-spin"}),"Création en cours..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.CheckCircle2,{size:20}),"Créer le produit"]})}),(0,r.jsx)(m.default,{href:"/market/publication-space/dashboard/products",className:"px-6 py-3 border border-border rounded-lg hover:bg-muted transition font-medium text-center",children:"Annuler"})]})]})]})}e.s(["default",()=>x])}]);