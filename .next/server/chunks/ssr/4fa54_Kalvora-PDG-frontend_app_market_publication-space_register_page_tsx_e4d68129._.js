module.exports=[48866,a=>{"use strict";var b=a.i(81697),c=a.i(14384),d=a.i(40861),e=a.i(3244),f=a.i(37133),g=a.i(85102),h=a.i(69380),i=a.i(64376),j=a.i(77138),k=a.i(81025);function l(){let a=(0,k.useRouter)(),[l,m]=(0,j.useState)(1),[n,o]=(0,j.useState)(!1),[p,q]=(0,j.useState)(!0),[r,s]=(0,j.useState)({firstName:"",lastName:"",email:"",phone:"",documentType:"carte-identite",documentNumber:"",documentFile:null,documentPreview:"",storeName:"",storeType:"boutique",storeDescription:"",termsAccepted:!1}),[t,u]=(0,j.useState)({});(0,j.useEffect)(()=>{(async()=>{try{let b=localStorage.getItem("token");if(!b)return void a.push("/login");let c=await fetch("http://localhost:4000/api/v1/auth/me",{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Erreur");let d=await c.json(),e=d.user||d;console.log("User data received:",e);let f="",g="";if(e.name){let a=e.name.trim().split(/\s+/);f=a[0]||"",g=a.slice(1).join(" ")||a[0]||""}console.log("Parsed name - firstName:",f,"lastName:",g),s(a=>({...a,firstName:f,lastName:g,email:e.email||"",phone:e.phone||""}))}catch(a){console.error("Erreur:",a)}finally{q(!1)}})()},[a]);let v=async b=>{let c;if(b.preventDefault(),c={},r.phone.trim()||(c.phone="Le téléphone est requis"),r.storeName.trim()||(c.storeName="Le nom de la boutique est requis"),r.termsAccepted||(c.terms="Vous devez accepter les conditions"),u(c),0===Object.keys(c).length){if(console.log("Form data before submission:",{firstName:r.firstName,lastName:r.lastName,email:r.email,phone:r.phone,documentNumber:r.documentNumber,storeName:r.storeName,storeType:r.storeType}),!r.firstName.trim()||!r.lastName.trim()||!r.email.trim()||!r.phone.trim()){let a=[];r.firstName.trim()||a.push("firstName"),r.lastName.trim()||a.push("lastName"),r.email.trim()||a.push("email"),r.phone.trim()||a.push("phone"),console.error("Missing fields:",a),u({submit:`Champs manquants: ${a.join(", ")}`});return}o(!0);try{let b=localStorage.getItem("token");if(!b){u({submit:"Vous devez être connecté"}),o(!1);return}let c=new FormData;c.append("firstName",r.firstName),c.append("lastName",r.lastName),c.append("email",r.email),c.append("phone",r.phone),c.append("documentType",r.documentType),c.append("documentNumber",r.documentNumber),c.append("storeName",r.storeName),c.append("storeType",r.storeType),c.append("storeDescription",r.storeDescription),r.documentFile&&c.append("documentFile",r.documentFile),console.log("Submitting form data...",{firstName:r.firstName,lastName:r.lastName,email:r.email,phone:r.phone});let d=await fetch("http://localhost:4000/api/v1/vendor/apply",{method:"POST",headers:{Authorization:`Bearer ${b}`},body:c});console.log("Response status:",d.status);let e=await d.json();if(console.log("Response data:",e),!d.ok){let b=e.error||e.message||"Erreur lors de la soumission";if("approved"===e.status)return void a.push("/market/publication-space/access");throw Error(b)}console.log("Success! Redirecting..."),a.push("/market/publication-space/pending")}catch(a){console.error("Error:",a),u({submit:a.message||"Une erreur est survenue"})}finally{o(!1)}}};return p?(0,b.jsxs)("main",{className:"min-h-screen bg-gradient-to-b from-background via-background to-muted/20",children:[(0,b.jsx)(c.default,{}),(0,b.jsx)("section",{className:"py-20 px-4 flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),(0,b.jsx)(d.default,{})]}):(0,b.jsxs)("main",{className:"min-h-screen bg-gradient-to-b from-background via-background to-muted/20",children:[(0,b.jsx)(c.default,{}),(0,b.jsx)("section",{className:"py-20 px-4",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"text-center mb-12",children:[(0,b.jsxs)("h1",{className:"text-4xl md:text-5xl font-bold text-foreground mb-4",children:["Créez votre"," ",(0,b.jsx)("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Espace de Publication"})]}),(0,b.jsx)("p",{className:"text-lg text-muted-foreground",children:"Complétez votre demande en 2 étapes simples"})]}),(0,b.jsx)("div",{className:"mb-12",children:(0,b.jsx)("div",{className:"flex justify-between items-center max-w-2xl mx-auto",children:[1,2].map(a=>(0,b.jsxs)("div",{className:"flex items-center flex-1",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,b.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold transition-all ${l>=a?"bg-gradient-to-br from-primary to-accent text-white shadow-lg":"bg-muted text-muted-foreground"}`,children:l>a?(0,b.jsx)(h.CheckCircle2,{size:24}):a}),(0,b.jsxs)("span",{className:`text-sm mt-2 ${l>=a?"text-foreground font-medium":"text-muted-foreground"}`,children:[1===a&&"Documents",2===a&&"Boutique"]})]}),a<2&&(0,b.jsx)("div",{className:`h-1 flex-1 mx-2 rounded ${l>a?"bg-gradient-to-r from-primary to-accent":"bg-muted"}`})]},a))})}),(0,b.jsx)("div",{className:"p-8 md:p-12 rounded-2xl bg-card border border-border shadow-xl",children:(0,b.jsxs)("form",{onSubmit:v,children:[1===l&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-border",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(f.FileCheck,{className:"w-5 h-5 text-primary"})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Informations personnelles"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Prénom ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:r.firstName,onChange:a=>s({...r,firstName:a.target.value}),className:`w-full px-4 py-3 rounded-lg bg-background border ${t.firstName?"border-red-500":"border-border"} text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition`,placeholder:"Votre prénom"}),t.firstName&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:t.firstName})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Nom ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:r.lastName,onChange:a=>s({...r,lastName:a.target.value}),className:`w-full px-4 py-3 rounded-lg bg-background border ${t.lastName?"border-red-500":"border-border"} text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition`,placeholder:"Votre nom de famille"}),t.lastName&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:t.lastName})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Type de document ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("select",{value:r.documentType,onChange:a=>s({...r,documentType:a.target.value}),className:"w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition",children:[{value:"carte-identite",label:"Carte d'identité"},{value:"passeport",label:"Passeport"},{value:"permis-conduire",label:"Permis de conduire"},{value:"autre",label:"Autre document officiel"}].map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Numéro du document ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:r.documentNumber,onChange:a=>s({...r,documentNumber:a.target.value}),className:`w-full px-4 py-3 rounded-lg bg-background border ${t.documentNumber?"border-red-500":"border-border"} text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition`,placeholder:"Ex: AB1234567"}),t.documentNumber&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:t.documentNumber})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Téléverser le document ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:`border-2 border-dashed ${t.documentFile?"border-red-500":"border-border"} rounded-lg p-8 text-center hover:border-primary transition cursor-pointer`,children:[(0,b.jsx)("input",{type:"file",id:"document-upload",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:a=>{let b=a.target.files?.[0];if(b){if(b.size>5242880)return void u({...t,documentFile:"Le fichier ne doit pas dépasser 5 MB"});if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(b.type))return void u({...t,documentFile:"Format accepté : JPG, PNG ou PDF"});if(s({...r,documentFile:b}),b.type.startsWith("image/")){let a=new FileReader;a.onloadend=()=>{s(b=>({...b,documentPreview:a.result}))},a.readAsDataURL(b)}else s(a=>({...a,documentPreview:""}));let a={...t};delete a.documentFile,u(a)}},className:"hidden"}),(0,b.jsx)("label",{htmlFor:"document-upload",className:"cursor-pointer",children:r.documentPreview?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("img",{src:r.documentPreview,alt:"Aperçu",className:"max-h-48 mx-auto rounded-lg"}),(0,b.jsx)("p",{className:"text-sm text-primary font-medium",children:r.documentFile?.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Cliquez pour changer"})]}):r.documentFile?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(f.FileCheck,{className:"w-16 h-16 text-primary mx-auto"}),(0,b.jsx)("p",{className:"text-sm text-primary font-medium",children:r.documentFile.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Cliquez pour changer"})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(e.Upload,{className:"w-16 h-16 text-muted-foreground mx-auto"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-foreground font-medium mb-1",children:"Cliquez pour téléverser votre document"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"JPG, PNG ou PDF (max. 5 MB)"})]})]})})]}),t.documentFile&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:t.documentFile})]}),(0,b.jsx)("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(i.AlertCircle,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm text-foreground",children:[(0,b.jsx)("p",{className:"font-medium mb-1",children:"Informations importantes :"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[(0,b.jsx)("li",{children:"Le document doit être lisible et en couleur"}),(0,b.jsx)("li",{children:"Toutes les informations doivent être visibles"}),(0,b.jsx)("li",{children:"Le document doit être en cours de validité"})]})]})]})})]}),2===l&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-border",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(g.Store,{className:"w-5 h-5 text-primary"})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Informations sur votre activité"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Téléphone ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"tel",value:r.phone,onChange:a=>s({...r,phone:a.target.value}),className:`w-full px-4 py-3 rounded-lg bg-background border ${t.phone?"border-red-500":"border-border"} text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition`,placeholder:"Ex: +33 6 12 34 56 78"}),t.phone&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:t.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Type d'activité ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("select",{value:r.storeType,onChange:a=>s({...r,storeType:a.target.value}),className:"w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition",children:[{value:"boutique",label:"Boutique en ligne"},{value:"communaute",label:"Communauté"},{value:"marketplace",label:"Marketplace"},{value:"entreprise",label:"Entreprise"},{value:"autre",label:"Autre"}].map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-foreground mb-2",children:["Nom de la boutique / Entreprise ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:r.storeName,onChange:a=>s({...r,storeName:a.target.value}),className:`w-full px-4 py-3 rounded-lg bg-background border ${t.storeName?"border-red-500":"border-border"} text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition`,placeholder:"Ex: Ma Super Boutique"}),t.storeName&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:t.storeName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description (optionnel)"}),(0,b.jsx)("textarea",{value:r.storeDescription,onChange:a=>s({...r,storeDescription:a.target.value}),rows:4,className:"w-full px-4 py-3 rounded-lg bg-background border border-border text-foreground focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition resize-none",placeholder:"Décrivez brièvement votre activité..."})]}),(0,b.jsxs)("div",{className:"pt-4",children:[(0,b.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:r.termsAccepted,onChange:a=>s({...r,termsAccepted:a.target.checked}),className:"mt-1 w-5 h-5 rounded border-border text-primary focus:ring-primary"}),(0,b.jsxs)("span",{className:"text-sm text-foreground",children:["J'accepte les ",(0,b.jsx)("a",{href:"/terms",className:"text-primary hover:underline",children:"conditions générales"})," et la ",(0,b.jsx)("a",{href:"/privacy",className:"text-primary hover:underline",children:"politique de confidentialité"}),(0,b.jsx)("span",{className:"text-red-500",children:" *"})]})]}),t.terms&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1 ml-8",children:t.terms})]}),(0,b.jsx)("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(h.CheckCircle2,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:"font-medium text-foreground mb-1",children:"Dernière étape !"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Après validation, vous recevrez un email dans les 24 heures pour accéder à votre espace et profiter de 7 jours d'essai gratuit."})]})]})})]}),t.submit&&(0,b.jsx)("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/20 mt-6",children:(0,b.jsx)("p",{className:"text-red-500 text-sm",children:t.submit})}),(0,b.jsxs)("div",{className:"flex gap-4 mt-8 pt-6 border-t border-border",children:[l>1&&(0,b.jsx)("button",{type:"button",onClick:()=>m(l-1),className:"px-6 py-3 border border-border text-foreground rounded-lg hover:bg-muted transition font-medium",children:"Précédent"}),l<2?(0,b.jsx)("button",{type:"button",onClick:()=>{let a;a={},r.documentNumber.trim()||(a.documentNumber="Le numéro de document est requis"),r.documentFile||(a.documentFile="Veuillez téléverser votre document"),u(a),0===Object.keys(a).length&&l<2&&(m(l+1),window.scrollTo({top:0,behavior:"smooth"}))},className:"flex-1 px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition font-semibold",children:"Continuer"}):(0,b.jsx)("button",{type:"submit",disabled:n,className:"flex-1 px-6 py-3 bg-gradient-to-r from-primary to-accent text-white rounded-lg hover:opacity-90 transition font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Envoi en cours..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.CheckCircle2,{size:20}),"Demander un espace"]})})]})]})})]})}),(0,b.jsx)(d.default,{})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=4fa54_Kalvora-PDG-frontend_app_market_publication-space_register_page_tsx_e4d68129._.js.map