module.exports=[22391,(a,b,c)=>{"use strict";b.exports=a.r(89794).vendored["react-ssr"].ReactServerDOMTurbopackClient},742,(a,b,c)=>{"use strict";b.exports=a.r(89794).vendored["react-ssr"].ReactDOM},48007,a=>{"use strict";var b=a.i(77138);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],48007)},91816,83546,a=>{"use strict";let b=(0,a.i(48007).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["default",()=>b],83546),a.s(["X",()=>b],91816)},52782,a=>{"use strict";let b=(0,a.i(48007).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);a.s(["Mail",()=>b],52782)},6396,a=>{"use strict";let b=(0,a.i(48007).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],6396)},82326,a=>{"use strict";let b=(0,a.i(48007).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],82326)},73270,a=>{"use strict";let b=(0,a.i(48007).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],73270)},74500,a=>{"use strict";let b=(0,a.i(48007).default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);a.s(["Camera",()=>b],74500)},51779,a=>{"use strict";var b=a.i(81697),c=a.i(77138),d=a.i(81025),e=a.i(86481),f=a.i(24641),g=a.i(14384),h=a.i(74500),i=a.i(73270),j=a.i(6396),k=a.i(82326);function l(){let{user:a,loading:l,updateUser:m}=(0,e.useAuth)(),n=(0,d.useRouter)(),[o,p]=(0,c.useState)("profile"),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(!1);(0,c.useEffect)(()=>{l||a||n.push("/login"),a&&(r(a.name||""),t(a.email||""),a?.avatar&&(a.avatar.startsWith("/")?x(`http://localhost:4000${a.avatar}`):x(a.avatar)))},[a,l,n]);let O=async a=>{a.preventDefault(),N(!0),L(""),J("");try{let a=localStorage.getItem("token"),b=await fetch("http://localhost:4000/api/v1/user/profile",{method:"PUT",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({name:q,email:s})});if(!b.ok){let a=await b.json();throw Error(a.error||"Erreur lors de la mise à jour")}let c=await b.json();if(m(c),u){let b=new FormData;b.append("avatar",u);let c=await fetch("http://localhost:4000/api/v1/upload/avatar",{method:"POST",headers:{Authorization:`Bearer ${a}`},body:b});if(c.ok){let a=await c.json();m({avatar:a.user.avatar})}x(""),v(null)}J("Profil mis à jour avec succès!"),setTimeout(()=>{J("")},1500)}catch(a){L(a.message||a.error||"Erreur lors de la mise à jour")}finally{N(!1)}},P=async a=>{if(a.preventDefault(),N(!0),L(""),J(""),A!==C){L("Les mots de passe ne correspondent pas"),N(!1);return}if(A.length<8){L("Le mot de passe doit contenir au moins 8 caractères"),N(!1);return}try{await f.userApi.updatePassword({currentPassword:y,newPassword:A}),J("Mot de passe modifié avec succès!"),z(""),B(""),D("")}catch(a){L(a.error||"Erreur lors de la modification")}finally{N(!1)}},Q=async()=>{if("SUPPRIMER"!==G)return void L('Veuillez taper "SUPPRIMER" pour confirmer');N(!0),L("");try{await f.userApi.deleteAccount(),localStorage.removeItem("auth_token"),n.push("/")}catch(a){L(a.error||"Erreur lors de la suppression"),N(!1)}};return l?(0,b.jsx)("main",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Chargement..."})]})}):a?(0,b.jsxs)("main",{className:"min-h-screen bg-background",children:[(0,b.jsx)(g.default,{}),(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Paramètres du compte"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Gérez vos informations personnelles et préférences"})]}),(0,b.jsx)("div",{className:"border-b border-border mb-8",children:(0,b.jsxs)("div",{className:"flex gap-8",children:[(0,b.jsxs)("button",{onClick:()=>p("profile"),className:`pb-4 px-2 border-b-2 transition ${"profile"===o?"border-primary text-primary font-semibold":"border-transparent text-muted-foreground hover:text-foreground"}`,children:[(0,b.jsx)(i.User,{className:"w-4 h-4 inline mr-2"}),"Profil"]}),(0,b.jsxs)("button",{onClick:()=>p("password"),className:`pb-4 px-2 border-b-2 transition ${"password"===o?"border-primary text-primary font-semibold":"border-transparent text-muted-foreground hover:text-foreground"}`,children:[(0,b.jsx)(j.Lock,{className:"w-4 h-4 inline mr-2"}),"Mot de passe"]}),(0,b.jsxs)("button",{onClick:()=>p("danger"),className:`pb-4 px-2 border-b-2 transition ${"danger"===o?"border-red-500 text-red-500 font-semibold":"border-transparent text-muted-foreground hover:text-foreground"}`,children:[(0,b.jsx)(k.Trash2,{className:"w-4 h-4 inline mr-2"}),"Zone de danger"]})]})}),I&&(0,b.jsx)("div",{className:"mb-6 p-4 rounded-lg bg-green-500/10 border border-green-500/20 text-green-600",children:I}),K&&(0,b.jsx)("div",{className:"mb-6 p-4 rounded-lg bg-red-500/10 border border-red-500/20 text-red-600",children:K}),"profile"===o&&(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground mb-6",children:"Informations du profil"}),(0,b.jsxs)("form",{onSubmit:O,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"w-24 h-24 rounded-full bg-primary flex items-center justify-center text-primary-foreground text-3xl font-bold overflow-hidden",children:w?(0,b.jsx)("img",{src:w,alt:"Avatar",className:"w-full h-full object-cover"}):a.name?.charAt(0).toUpperCase()}),(0,b.jsxs)("label",{className:"absolute bottom-0 right-0 w-8 h-8 bg-primary rounded-full flex items-center justify-center cursor-pointer hover:bg-primary/90 transition shadow-lg",children:[(0,b.jsx)(h.Camera,{className:"w-4 h-4 text-primary-foreground"}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){if(b.size>2097152)return void L("L'image ne doit pas dépasser 2 Mo");v(b);let a=new FileReader;a.onloadend=()=>{x(a.result)},a.readAsDataURL(b)}},className:"hidden"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:"Photo de profil"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"JPG, PNG ou GIF. Max 2 Mo."}),w&&(0,b.jsxs)("button",{type:"button",onClick:()=>{x(""),v(null)},className:"mt-3 inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-md transition border border-red-200 hover:border-red-300",children:[(0,b.jsx)(k.Trash2,{className:"w-3.5 h-3.5"}),(0,b.jsx)("span",{children:"Supprimer la photo"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Nom complet"}),(0,b.jsx)("input",{type:"text",value:q,onChange:a=>r(a.target.value),className:"w-full px-4 py-2 rounded-lg border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Email"}),(0,b.jsx)("input",{type:"email",value:s,onChange:a=>t(a.target.value),className:"w-full px-4 py-2 rounded-lg border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),(0,b.jsx)("button",{type:"submit",disabled:M,className:"w-full px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition disabled:opacity-50 disabled:cursor-not-allowed",children:M?"Enregistrement...":"Enregistrer les modifications"})]})]}),"password"===o&&(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground mb-6",children:"Modifier le mot de passe"}),(0,b.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Mot de passe actuel"}),(0,b.jsx)("input",{type:"password",value:y,onChange:a=>z(a.target.value),className:"w-full px-4 py-2 rounded-lg border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Nouveau mot de passe"}),(0,b.jsx)("input",{type:"password",value:A,onChange:a=>B(a.target.value),className:"w-full px-4 py-2 rounded-lg border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0,minLength:8}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Au moins 8 caractères"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Confirmer le nouveau mot de passe"}),(0,b.jsx)("input",{type:"password",value:C,onChange:a=>D(a.target.value),className:"w-full px-4 py-2 rounded-lg border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),(0,b.jsx)("button",{type:"submit",disabled:M,className:"w-full px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition disabled:opacity-50 disabled:cursor-not-allowed",children:M?"Modification...":"Modifier le mot de passe"})]})]}),"danger"===o&&(0,b.jsxs)("div",{className:"bg-card border border-red-500/20 rounded-lg p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-red-500 mb-2",children:"Zone de danger"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"Les actions dans cette section sont irréversibles. Soyez prudent."}),(0,b.jsxs)("div",{className:"border border-red-500/20 rounded-lg p-6 bg-red-500/5",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground mb-2",children:"Supprimer mon compte"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Une fois supprimé, votre compte ne pourra pas être récupéré. Toutes vos données seront définitivement effacées."}),E?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:'Tapez "SUPPRIMER" pour confirmer'}),(0,b.jsx)("input",{type:"text",value:G,onChange:a=>H(a.target.value),placeholder:"SUPPRIMER",className:"w-full px-4 py-2 rounded-lg border border-red-500/50 bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>{F(!1),H("")},className:"flex-1 px-4 py-2 border border-border rounded-lg text-foreground hover:bg-muted transition",children:"Annuler"}),(0,b.jsx)("button",{onClick:Q,disabled:M||"SUPPRIMER"!==G,className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg font-semibold hover:bg-red-600 transition disabled:opacity-50 disabled:cursor-not-allowed",children:M?"Suppression...":"Confirmer la suppression"})]})]}):(0,b.jsx)("button",{onClick:()=>F(!0),className:"px-4 py-2 bg-red-500 text-white rounded-lg font-semibold hover:bg-red-600 transition",children:"Supprimer mon compte"})]})]})]})]}):null}a.s(["default",()=>l])}];

//# sourceMappingURL=multi-platform-site_Kalvora-PDG-frontend_25b2b926._.js.map